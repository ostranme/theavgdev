<!doctype html><html lang=en data-theme=light><head><title>Mark Ostrander | :bicyclist: Exploring the Unofficial Peloton APIs</title><meta charset=utf-8><meta name=generator content="Hugo 0.80.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="Providing the web with above average content"><link rel=stylesheet href=/css/style.min.9a6700e4461b50dccdddfc4f81dc65d77e7fca22c35665e398a0c36568db59c7.css integrity="sha256-mmcA5EYbUNzN3fxPgdxl135/yiLDVmXjmKDDZWjbWcc=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.cc84ed683057cc175ddfa738ea6ba2d5c882b95cb64f50bf9be918cb3791887b.css integrity="sha256-zITtaDBXzBdd36c46mui1ciCuVy2T1C/m+kYyzeRiHs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><link rel="shortcut icon" href=favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=favicon-16x16.png><link rel=canonical href=/posts/peloton-postman/><script type=text/javascript src=/js/anatole-header.min.d8599ee07b7d3f11bafbac30657ccc591e8d7fd36a9f580cd4c09e24e0e4a971.js integrity="sha256-2Fme4Ht9PxG6+6wwZXzMWR6Nf9Nqn1gM1MCeJODkqXE=" crossorigin=anonymous></script><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="images/Logo_TheAvgDev.png"><meta name=twitter:title content=":bicyclist: Exploring the Unofficial Peloton APIs"><meta name=twitter:description content="Using Postman to explore the &ldquo;Unofficial&rdquo; Peloton APIs"></head><body><div class="sidebar animated fadeInDown"><div class=logo-title><div class=title><img src=/images/Logo_TheAvgDev.png alt="profile picture"><h3><a href=/>The Average Developer</a></h3><div class=description><p>Providing the web with above average content</p></div></div></div><ul class=social-links><li><a href=https://github.com/ostranme/theavgdev rel=me aria-label=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li><a href=https://www.instagram.com/theavgdev/ rel=me aria-label=instagram><i class="fab fa-instagram fa-2x" aria-hidden=true></i></a></li><li><a href=https://twitter.com/TheAvgDev rel=me aria-label=twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li></ul><div class=footer><div class=by_farbox>&copy; Mark Ostrander 2020-2021</div></div></div><div class=main><div class="page-top animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a><ul class=nav id=navMenu><li><a href=/>Home</a></li><li><a href=/posts/>Posts</a></li><li><a href=/about/>About</a></li></ul></div><div class=autopagerize_page_element><div class=content><div class="post animated fadeInDown"><div class=post-content><div class=post-title><h3>ğŸš´â€â™‚ï¸ Exploring the Unofficial Peloton APIs</h3></div><p>The Peloton APIs are sadly unsupported and not documented. However, one of the most interesting things about the Peloton bike and app is all the data it provides about your workouts. After poking around the interwebs for info on the APIs and doing my own research I realized Peloton actually has a ton of APIs (both REST and GrahpQL).</p><p>In doing my research I typically just assume someone has done the work of documenting the APIs, however for the sake of the exercise (pun intended) I wanted to go through the motions and document them myself to learn what data was available to me.</p><p>TLDR;</p><blockquote><p>Here&rsquo;s a link to the <a href=https://github.com/ostranme/peloton-postman>Postman collections</a> of all the APIs I could find through researching the network calls and other online resources that already documented (link to other great work below). If you have a valid Peloton account, you should be able to plug and play with the collection.</p></blockquote><h2 id=rides-vs-classes-workouts>Rides vs. Classes. Workouts</h2><p>There seems to be a lot of overlap of the following terms. This is my attempt to organize and define them in the context of the Postman collection.</p><ol><li><p>Classes, no matter the workout type (strength, yoga, cycling, etc.) seem to be considered a &ldquo;ride&rdquo; (Ex: Strength, Yoga, Meditation are still consider rides when using the /rides resource).</p></li><li><p>Rides are the classes that you can take with Peloton, not necessarily what you have taken/completed.</p></li><li><p>Workouts are classes/rides you have taken/completed.</p></li></ol><h2 id=authentication>Authentication</h2><p>The Peloton API uses session based authentication with cookies. The server will create a session for the user after the user logs in. The session id is then stored as your <code>peloton_session_id</code> cookie on the userâ€™s browser. While the user stays logged in, the cookie would be sent along with every subsequent request.</p><p>Additionally you may need a <code>Peloton-Platform: web</code> request header for some requests (I still don&rsquo;t know why some routes require this and others don&rsquo;t). If I had to guess they have additional APIs that are native to the tablet and mobile app vs the web app.</p><h2 id=rest-api>REST API</h2><p>The collection documented are organized under this scheme:</p><ul><li><a href=#rest-api>REST API</a><ul><li><a href=#auth-api>Auth API</a></li><li><a href=#ecommerce-api>eCommerce API</a></li><li><a href=#instructor-api>Instructor API</a></li><li><a href=#ride--class-api>Ride / Class API</a></li><li><a href=#user-api>User API</a></li><li><a href=#workout-api>Workout API</a></li></ul></li><li><a href=#graphql-api>GraphQL API</a><ul><li><a href=#querying-tags>Querying Tags</a></li><li><a href=#mutations>Mutations</a></li><li><a href=#qraphql-pagination>QraphQL Pagination</a></li></ul></li></ul><blockquote><p>ğŸ”’ = Privileged Endpoints</p></blockquote><h3 id=auth-api>Auth API</h3><ul><li><strong>Login</strong> - Create a valid user session with Peloton user credentials (username/password)</li><li><strong>Logout</strong> - Terminate a specific user session</li><li><strong>Check Session</strong> - Check current user session (based off <code>peloton_session_id</code> Cookie)</li></ul><p><a href=https://app.getpostman.com/run-collection/57328243f42c253c1048><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=ecommerce-api>eCommerce API</h3><ul><li><strong>Peloton Plans</strong> - Request a list of available Peloton plans (trials, memberships)</li><li><strong>Peloton Stores</strong> - Request a list of available Peloton stores</li><li><strong>Peloton Bike Reviews</strong> - Request Peloton bike reviews</li><li><strong>Peloton Account Order History ğŸ”’</strong> - Request your Peloton user account order history</li><li><strong>Peloton Account Payment Info ğŸ”’</strong> - Request your Peloton user account payment info details</li></ul><p><a href=https://app.getpostman.com/run-collection/dce5e57f8f2116d03e27><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=instructor-api>Instructor API</h3><ul><li><strong>All Instructors</strong> - Request all Peloton instructors</li><li><strong>Instructor by Id</strong> - Request Peloton instructor details by Id</li></ul><p><a href=https://app.getpostman.com/run-collection/ba7dc5dff85313e5c2bf><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=ride--class-api>Ride / Class API</h3><ul><li><strong>Ride Metadata Mappings</strong> - Request ride metadata mappings details</li><li><strong>Archived Rides</strong> - Request archived rides</li><li><strong>Live Rides</strong> - Request live rides</li><li><strong>Ride by Id</strong> - Request ride info by id</li><li><strong>Ride Details</strong> - Request ride details</li><li><strong>Ride Filters</strong> - Request ride filters</li><li><strong>Ride Recent Following Workouts ğŸ”’</strong> - Request recent following users</li><li><strong>Class Categories</strong> - Request Peloton class categories</li><li><strong>Favorite Class ğŸ”’</strong> - Favorite/bookmark a Peloton class</li><li><strong>Unfavorite Class ğŸ”’</strong> - Unfavorite/unbookmark a Peloton class</li><li><strong>Reserve Live Class ğŸ”’</strong> - Reserve an upcoming live Peloton class</li><li><strong>Unreserve Live Class ğŸ”’</strong> - Remove reservation from an upcoming live Peloton class</li></ul><p><a href=https://app.getpostman.com/run-collection/7fbe9df35c2e20de26d6><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=user-api>User API</h3><ul><li><strong>Me ğŸ”’</strong> - Request the current logged in user details</li><li><strong>User by Id</strong> - Request user details by user id</li><li><strong>User by Username</strong> - Request user details by Peloton username</li><li><strong>User Workouts ğŸ”’</strong> - Request a list of a user&rsquo;s workouts</li><li><strong>User Workout History ğŸ”’</strong> - Download your workout history in CSV format</li><li><strong>User Overview ğŸ”’</strong> - Request user workout overview details (workout counts, achievements, personal records, steaks)</li><li><strong>User Subscriptions ğŸ”’</strong> - Request your Peloton user account subscription details</li><li><strong>User Subscription Transactions ğŸ”’</strong> - Request your Peloton user subscription transactions (billing)</li><li><strong>User Achievements ğŸ”’</strong> - Request user achievement details</li><li><strong>User Challenges ğŸ”’</strong> - Request user challenges details (past, current, upcoming)</li><li><strong>User Followers ğŸ”’</strong> - Request user followers details</li><li><strong>User Following ğŸ”’</strong> - Request user following details</li><li><strong>User Search ğŸ”’</strong> - Search for Peloton users by username</li><li><strong>User Settings ğŸ”’</strong> - Request user settings details</li><li><strong>User Referral History ğŸ”’</strong> - Request user referral history</li><li><strong>User Calendar Activity ğŸ”’</strong> - Request user calendar activity</li><li><strong>User Relationships ğŸ”’</strong> - Follow/Unfollow a specific Peloton user by id</li><li><strong>Update User Profile ğŸ”’</strong> - Update your Peloton user profile info</li><li><strong>Update User Settings ğŸ”’</strong> - Update your Peloton user settings info (Privacy, Notifications, Connected Networks, Display Preferences, Content Preferences)</li></ul><p><a href=https://app.getpostman.com/run-collection/9a2a890f2070928e52db><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=workout-api>Workout API</h3><ul><li><strong>User Workouts ğŸ”’</strong> - Request a list of a user&rsquo;s workouts</li><li><strong>Workout by Id</strong> - Request workout details by id</li><li><strong>Workout Performance Graph</strong> - Request workout performance graph details (summaries, metrics)</li><li><strong>Delete Workout ğŸ”’</strong> - Remove/delete Peloton workout from user&rsquo;s workout history</li></ul><p><a href=https://app.getpostman.com/run-collection/f27132f0c9e8ddffa725><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h2 id=graphql-api>GraphQL API</h2><p>Peloton appears to use GraphQL to support their tags functionality. Below are the available queries using the GraphQL API endpoint.</p><p><a href=https://app.getpostman.com/run-collection/74337aa08297636d2466><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><p>The GraphQL endpoint still requires an authenticated user to login to produce a <code>peloton_session_id</code> Cookie.</p><ul><li><a href=#graphql-api>GraphQL APIs</a><ul><li><a href=#querying-tags>Querying Tags</a></li><li><a href=#mutations>Mutations</a></li><li><a href=#graphql-pagination>Pagination</a></li></ul></li></ul><blockquote><p>ğŸ”’ = Privileged Queries / Mutations</p></blockquote><h3 id=querying-tags>Querying Tags</h3><p>Perform read operations and retrieve data on Peloton tags (Ex: #PelotonDads, #PelotonDevs).</p><ul><li><strong>MyTags ğŸ”’</strong> - Request your tags</li><li><strong>PrimaryTag ğŸ”’</strong> - Request your primary tag</li><li><strong>SearchTag ğŸ”’</strong> - Search for tags</li><li><strong>TagBrowseCategory ğŸ”’</strong> - Request tag info by category</li><li><strong>TagBrowseCategoryDisplayNames ğŸ”’</strong> - Request tag category display names</li><li><strong>TagDetail ğŸ”’</strong> - Request tag details</li></ul><h3 id=mutations>Mutations</h3><p>Perform mutations to change data on Peloton tags.</p><ul><li><strong>AddTagToUser ğŸ”’</strong> - Add Peloton tag to your user account</li><li><strong>RemoveTagFromUser ğŸ”’</strong> - Remove tag from your user account</li><li><strong>SetTagAsPrimary ğŸ”’</strong> - Set tag as your primary tag</li></ul><h3 id=qraphql-pagination>QraphQL Pagination</h3><p>If a resource has a lot of data, more than likely the response will have a <code>pageInfo</code> object that contains metadata you&rsquo;ll need to continue paginating:</p><ul><li><code>endCursor</code> - returns a non-null opaque string as a marker to the last items in the collection of results returned from the query.</li><li><code>hasNextPage</code> boolean field to help identify if there are more pages/results to query from the collection.</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#e6db74>&#34;pageInfo&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
    <span style=color:#f92672>&#34;endCursor&#34;</span>: <span style=color:#e6db74>&#34;MTk==&#34;</span>,
    <span style=color:#f92672>&#34;hasNextPage&#34;</span>: <span style=color:#66d9ef>true</span>
}
</code></pre></div><p>On the subsequent request you can pass a graphql <code>after</code> variable/cursor argument to tell the API, â€œhereâ€™s where I left off last time, get me the next X number of items."</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;after&#34;</span>: <span style=color:#e6db74>&#34;MTk==&#34;</span>
}
</code></pre></div></div><div class=post-footer><div class=info><span class=separator><a class=tag href=/tags/postman/>postman</a><a class=tag href=/tags/apis/>apis</a><a class=tag href=/tags/graphql/>graphql</a><a class=tag href=/tags/peloton/>peloton</a></span></div></div></div></div></div></div><script type=text/javascript src=/js/jquery.min.86b1e8f819ee2d9099a783e50b49dff24282545fc40773861f9126b921532e4c.js integrity="sha256-hrHo+BnuLZCZp4PlC0nf8kKCVF/EB3OGH5EmuSFTLkw=" crossorigin=anonymous></script><script type=text/javascript src=/js/bundle.min.0f9c74cb78f13d1f15f33daff4037c70354f98acfbb97a6f61708966675c3cae.js integrity="sha256-D5x0y3jxPR8V8z2v9AN8cDVPmKz7uXpvYXCJZmdcPK4=" crossorigin=anonymous></script><script type=text/javascript src=/js/medium-zoom.min.92f21c856129f84aeb719459b3e6ac621a3032fd7b180a18c04e1d12083f8aba.js integrity="sha256-kvIchWEp+ErrcZRZs+asYhowMv17GAoYwE4dEgg/iro=" crossorigin=anonymous></script></body></html>