<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.80.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>:bicyclist: Exploring the Unofficial Peloton APIs&nbsp;&ndash;&nbsp;The AVG Dev</title><link rel=stylesheet href=/css/core.min.d0f5a746bad9dcc323fc3bac01690ae20ea8d9c317c838617fee20d7e1c427f6b155d569f8daf4491df0816a139224b5.css integrity=sha384-0PWnRrrZ3MMj/DusAWkK4g6o2cMXyDhhf+4g1+HEJ/axVdVp+Nr0SR3wgWoTkiS1><meta name=twitter:card content="summary"><meta name=twitter:title content=":bicyclist: Exploring the Unofficial Peloton APIs"><body><div class="header-bar fixed-top"></div><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><img class="site logo" src=/img/Mark_TheAvgDev.png alt><span class="site name">The AVG Dev</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/posts>Posts</a></nav></div></span></div><div class="site slogan"><span class=title>🎉 Above Average Content 🎉</span></div></section><section id=content></section><section id=content-post><div class=article-container><section class="article header"><h1 class="article title">🚴‍♂️ Exploring the Unofficial Peloton APIs</h1></section><article class="article markdown-body"><p>The Peloton APIs are sadly unsupported and not documented. However, one of the most interesting things about the Peloton bike and app is all the data it provides about your workouts. After poking around the interwebs for info on the APIs and doing my own research I realized Peloton actually has a ton of APIs (both REST and GrahpQL).</p><p>In doing my research I typically just assume someone has done the work of documenting the APIs, however for the sake of the exercise (pun intended) I wanted to go through the motions and document them myself to learn what data was available to me.</p><p>TLDR;</p><blockquote><p>Here&rsquo;s a link to the <a href=https://github.com/ostranme/peloton-postman target=_blank rel="noopener noreferrer">Postman collections</a>
of all the APIs I could find through researching the network calls and other online resources that already documented (link to other great work below). If you have a valid Peloton account, you should be able to plug and play with the collection.</p></blockquote><h2 id=rides-vs-classes-workouts>Rides vs. Classes. Workouts</h2><p>There seems to be a lot of overlap of the following terms. This is my attempt to organize and define them in the context of the Postman collection.</p><ol><li><p>Classes, no matter the workout type (strength, yoga, cycling, etc.) seem to be considered a &ldquo;ride&rdquo; (Ex: Strength, Yoga, Meditation are still consider rides when using the /rides resource).</p></li><li><p>Rides are the classes that you can take with Peloton, not necessarily what you have taken/completed.</p></li><li><p>Workouts are classes/rides you have taken/completed.</p></li></ol><h2 id=authentication>Authentication</h2><p>The Peloton API uses session based authentication with cookies. The server will create a session for the user after the user logs in. The session id is then stored as your <code>peloton_session_id</code> cookie on the user’s browser. While the user stays logged in, the cookie would be sent along with every subsequent request.</p><p>Additionally you may need a <code>Peloton-Platform: web</code> request header for some requests (I still don&rsquo;t know why some routes require this and others don&rsquo;t). If I had to guess they have additional APIs that are native to the tablet and mobile app vs the web app.</p><h2 id=rest-api>REST API</h2><p>The collection documented are organized under this scheme:</p><ul><li><a href=#rest-api>REST API</a><ul><li><a href=#auth-api>Auth API</a></li><li><a href=#ecommerce-api>eCommerce API</a></li><li><a href=#instructor-api>Instructor API</a></li><li><a href=#ride--class-api>Ride / Class API</a></li><li><a href=#user-api>User API</a></li><li><a href=#workout-api>Workout API</a></li></ul></li><li><a href=#graphql-api>GraphQL API</a><ul><li><a href=#querying-tags>Querying Tags</a></li><li><a href=#mutations>Mutations</a></li><li><a href=#qraphql-pagination>QraphQL Pagination</a></li></ul></li></ul><blockquote><p>🔒 = Privileged Endpoints</p></blockquote><h3 id=auth-api>Auth API</h3><ul><li><strong>Login</strong> - Create a valid user session with Peloton user credentials (username/password)</li><li><strong>Logout</strong> - Terminate a specific user session</li><li><strong>Check Session</strong> - Check current user session (based off <code>peloton_session_id</code> Cookie)</li></ul><p><a href=https://app.getpostman.com/run-collection/57328243f42c253c1048 target=_blank rel="noopener noreferrer"><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=ecommerce-api>eCommerce API</h3><ul><li><strong>Peloton Plans</strong> - Request a list of available Peloton plans (trials, memberships)</li><li><strong>Peloton Stores</strong> - Request a list of available Peloton stores</li><li><strong>Peloton Bike Reviews</strong> - Request Peloton bike reviews</li><li><strong>Peloton Account Order History 🔒</strong> - Request your Peloton user account order history</li><li><strong>Peloton Account Payment Info 🔒</strong> - Request your Peloton user account payment info details</li></ul><p><a href=https://app.getpostman.com/run-collection/dce5e57f8f2116d03e27 target=_blank rel="noopener noreferrer"><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=instructor-api>Instructor API</h3><ul><li><strong>All Instructors</strong> - Request all Peloton instructors</li><li><strong>Instructor by Id</strong> - Request Peloton instructor details by Id</li></ul><p><a href=https://app.getpostman.com/run-collection/ba7dc5dff85313e5c2bf target=_blank rel="noopener noreferrer"><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=ride--class-api>Ride / Class API</h3><ul><li><strong>Ride Metadata Mappings</strong> - Request ride metadata mappings details</li><li><strong>Archived Rides</strong> - Request archived rides</li><li><strong>Live Rides</strong> - Request live rides</li><li><strong>Ride by Id</strong> - Request ride info by id</li><li><strong>Ride Details</strong> - Request ride details</li><li><strong>Ride Filters</strong> - Request ride filters</li><li><strong>Ride Recent Following Workouts 🔒</strong> - Request recent following users</li><li><strong>Class Categories</strong> - Request Peloton class categories</li><li><strong>Favorite Class 🔒</strong> - Favorite/bookmark a Peloton class</li><li><strong>Unfavorite Class 🔒</strong> - Unfavorite/unbookmark a Peloton class</li><li><strong>Reserve Live Class 🔒</strong> - Reserve an upcoming live Peloton class</li><li><strong>Unreserve Live Class 🔒</strong> - Remove reservation from an upcoming live Peloton class</li></ul><p><a href=https://app.getpostman.com/run-collection/7fbe9df35c2e20de26d6 target=_blank rel="noopener noreferrer"><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=user-api>User API</h3><ul><li><strong>Me 🔒</strong> - Request the current logged in user details</li><li><strong>User by Id</strong> - Request user details by user id</li><li><strong>User by Username</strong> - Request user details by Peloton username</li><li><strong>User Workouts 🔒</strong> - Request a list of a user&rsquo;s workouts</li><li><strong>User Workout History 🔒</strong> - Download your workout history in CSV format</li><li><strong>User Overview 🔒</strong> - Request user workout overview details (workout counts, achievements, personal records, steaks)</li><li><strong>User Subscriptions 🔒</strong> - Request your Peloton user account subscription details</li><li><strong>User Subscription Transactions 🔒</strong> - Request your Peloton user subscription transactions (billing)</li><li><strong>User Achievements 🔒</strong> - Request user achievement details</li><li><strong>User Challenges 🔒</strong> - Request user challenges details (past, current, upcoming)</li><li><strong>User Followers 🔒</strong> - Request user followers details</li><li><strong>User Following 🔒</strong> - Request user following details</li><li><strong>User Search 🔒</strong> - Search for Peloton users by username</li><li><strong>User Settings 🔒</strong> - Request user settings details</li><li><strong>User Referral History 🔒</strong> - Request user referral history</li><li><strong>User Calendar Activity 🔒</strong> - Request user calendar activity</li><li><strong>User Relationships 🔒</strong> - Follow/Unfollow a specific Peloton user by id</li><li><strong>Update User Profile 🔒</strong> - Update your Peloton user profile info</li><li><strong>Update User Settings 🔒</strong> - Update your Peloton user settings info (Privacy, Notifications, Connected Networks, Display Preferences, Content Preferences)</li></ul><p><a href=https://app.getpostman.com/run-collection/9a2a890f2070928e52db target=_blank rel="noopener noreferrer"><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h3 id=workout-api>Workout API</h3><ul><li><strong>User Workouts 🔒</strong> - Request a list of a user&rsquo;s workouts</li><li><strong>Workout by Id</strong> - Request workout details by id</li><li><strong>Workout Performance Graph</strong> - Request workout performance graph details (summaries, metrics)</li><li><strong>Delete Workout 🔒</strong> - Remove/delete Peloton workout from user&rsquo;s workout history</li></ul><p><a href=https://app.getpostman.com/run-collection/f27132f0c9e8ddffa725 target=_blank rel="noopener noreferrer"><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><h2 id=graphql-api>GraphQL API</h2><p>Peloton appears to use GraphQL to support their tags functionality. Below are the available queries using the GraphQL API endpoint.</p><p><a href=https://app.getpostman.com/run-collection/74337aa08297636d2466 target=_blank rel="noopener noreferrer"><img src=https://run.pstmn.io/button.svg alt="Run in Postman"></a></p><p>The GraphQL endpoint still requires an authenticated user to login to produce a <code>peloton_session_id</code> Cookie.</p><ul><li><a href=#graphql-api>GraphQL APIs</a><ul><li><a href=#querying-tags>Querying Tags</a></li><li><a href=#mutations>Mutations</a></li><li><a href=#graphql-pagination>Pagination</a></li></ul></li></ul><blockquote><p>🔒 = Privileged Queries / Mutations</p></blockquote><h3 id=querying-tags>Querying Tags</h3><p>Perform read operations and retrieve data on Peloton tags (Ex: #PelotonDads, #PelotonDevs).</p><ul><li><strong>MyTags 🔒</strong> - Request your tags</li><li><strong>PrimaryTag 🔒</strong> - Request your primary tag</li><li><strong>SearchTag 🔒</strong> - Search for tags</li><li><strong>TagBrowseCategory 🔒</strong> - Request tag info by category</li><li><strong>TagBrowseCategoryDisplayNames 🔒</strong> - Request tag category display names</li><li><strong>TagDetail 🔒</strong> - Request tag details</li></ul><h3 id=mutations>Mutations</h3><p>Perform mutations to change data on Peloton tags.</p><ul><li><strong>AddTagToUser 🔒</strong> - Add Peloton tag to your user account</li><li><strong>RemoveTagFromUser 🔒</strong> - Remove tag from your user account</li><li><strong>SetTagAsPrimary 🔒</strong> - Set tag as your primary tag</li></ul><h3 id=qraphql-pagination>QraphQL Pagination</h3><p>If a resource has a lot of data, more than likely the response will have a <code>pageInfo</code> object that contains metadata you&rsquo;ll need to continue paginating:</p><ul><li><code>endCursor</code> - returns a non-null opaque string as a marker to the last items in the collection of results returned from the query.</li><li><code>hasNextPage</code> boolean field to help identify if there are more pages/results to query from the collection.</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#e6db74>&#34;pageInfo&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
    <span style=color:#f92672>&#34;endCursor&#34;</span>: <span style=color:#e6db74>&#34;MTk==&#34;</span>,
    <span style=color:#f92672>&#34;hasNextPage&#34;</span>: <span style=color:#66d9ef>true</span>
}
</code></pre></div><p>On the subsequent request you can pass a graphql <code>after</code> variable/cursor argument to tell the API, “here’s where I left off last time, get me the next X number of items."</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;after&#34;</span>: <span style=color:#e6db74>&#34;MTk==&#34;</span>
}
</code></pre></div></article><section class="article labels"><a class=tag href=/tags/postman/>postman</a><a class=tag href=/tags/apis/>apis</a><a class=tag href=/tags/graphql/>graphql</a><a class=tag href=/tags/peloton/>peloton</a></section></div><div class="article bottom"></div></section><section id=footer><div class=footer-wrap><p class=copyright>©2021 The AVG Dev.</p></div></section></body></html>