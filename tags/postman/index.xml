<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>postman on The AVG Dev</title><link>https://theavedev.com/tags/postman/</link><description>Recent content in postman on The AVG Dev</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Â©2021 The AVG Dev.</copyright><atom:link href="https://theavedev.com/tags/postman/index.xml" rel="self" type="application/rss+xml"/><item><title>:bicyclist: Exploring the Unofficial Peloton APIs</title><link>https://theavedev.com/posts/peloton-postman/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://theavedev.com/posts/peloton-postman/</guid><description>&lt;p>The Peloton APIs are sadly unsupported and not documented. However, one of the most interesting things about the Peloton bike and app is all the data it provides about your workouts. After poking around the interwebs for info on the APIs and doing my own research I realized Peloton actually has a ton of APIs (both REST and GrahpQL).&lt;/p>
&lt;p>In doing my research I typically just assume someone has done the work of documenting the APIs, however for the sake of the exercise (pun intended) I wanted to go through the motions and document them myself to learn what data was available to me.&lt;/p>
&lt;p>TLDR;&lt;/p>
&lt;blockquote>
&lt;p>Here&amp;rsquo;s a link to the &lt;a href="https://github.com/ostranme/peloton-postman"target="_blank" rel="noopener noreferrer">Postman collections&lt;/a>
of all the APIs I could find through researching the network calls and other online resources that already documented (link to other great work below). If you have a valid Peloton account, you should be able to plug and play with the collection.&lt;/p>
&lt;/blockquote>
&lt;h2 id="rides-vs-classes-workouts">Rides vs. Classes. Workouts&lt;/h2>
&lt;p>There seems to be a lot of overlap of the following terms. This is my attempt to organize and define them in the context of the Postman collection.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Classes, no matter the workout type (strength, yoga, cycling, etc.) seem to be considered a &amp;ldquo;ride&amp;rdquo; (Ex: Strength, Yoga, Meditation are still consider rides when using the /rides resource).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Rides are the classes that you can take with Peloton, not necessarily what you have taken/completed.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Workouts are classes/rides you have taken/completed.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="authentication">Authentication&lt;/h2>
&lt;p>The Peloton API uses session based authentication with cookies. The server will create a session for the user after the user logs in. The session id is then stored as your &lt;code>peloton_session_id&lt;/code> cookie on the userâ€™s browser. While the user stays logged in, the cookie would be sent along with every subsequent request.&lt;/p>
&lt;p>Additionally you may need a &lt;code>Peloton-Platform: web&lt;/code> request header for some requests (I still don&amp;rsquo;t know why some routes require this and others don&amp;rsquo;t). If I had to guess they have additional APIs that are native to the tablet and mobile app vs the web app.&lt;/p>
&lt;h2 id="rest-api">REST API&lt;/h2>
&lt;p>The collection documented are organized under this scheme:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="#rest-api">REST API&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#auth-api">Auth API&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#ecommerce-api">eCommerce API&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#instructor-api">Instructor API&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#ride--class-api">Ride / Class API&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#user-api">User API&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#workout-api">Workout API&lt;/a>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#graphql-api">GraphQL API&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#querying-tags">Querying Tags&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#mutations">Mutations&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#qraphql-pagination">QraphQL Pagination&lt;/a>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ðŸ”’ = Privileged Endpoints&lt;/p>
&lt;/blockquote>
&lt;h3 id="auth-api">Auth API&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Login&lt;/strong> - Create a valid user session with Peloton user credentials (username/password)&lt;/li>
&lt;li>&lt;strong>Logout&lt;/strong> - Terminate a specific user session&lt;/li>
&lt;li>&lt;strong>Check Session&lt;/strong> - Check current user session (based off &lt;code>peloton_session_id&lt;/code> Cookie)&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://app.getpostman.com/run-collection/57328243f42c253c1048"target="_blank" rel="noopener noreferrer">&lt;img src="https://run.pstmn.io/button.svg"
alt="Run in Postman"/>&lt;/a>
&lt;/p>
&lt;h3 id="ecommerce-api">eCommerce API&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Peloton Plans&lt;/strong> - Request a list of available Peloton plans (trials, memberships)&lt;/li>
&lt;li>&lt;strong>Peloton Stores&lt;/strong> - Request a list of available Peloton stores&lt;/li>
&lt;li>&lt;strong>Peloton Bike Reviews&lt;/strong> - Request Peloton bike reviews&lt;/li>
&lt;li>&lt;strong>Peloton Account Order History ðŸ”’&lt;/strong> - Request your Peloton user account order history&lt;/li>
&lt;li>&lt;strong>Peloton Account Payment Info ðŸ”’&lt;/strong> - Request your Peloton user account payment info details&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://app.getpostman.com/run-collection/dce5e57f8f2116d03e27"target="_blank" rel="noopener noreferrer">&lt;img src="https://run.pstmn.io/button.svg"
alt="Run in Postman"/>&lt;/a>
&lt;/p>
&lt;h3 id="instructor-api">Instructor API&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>All Instructors&lt;/strong> - Request all Peloton instructors&lt;/li>
&lt;li>&lt;strong>Instructor by Id&lt;/strong> - Request Peloton instructor details by Id&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://app.getpostman.com/run-collection/ba7dc5dff85313e5c2bf"target="_blank" rel="noopener noreferrer">&lt;img src="https://run.pstmn.io/button.svg"
alt="Run in Postman"/>&lt;/a>
&lt;/p>
&lt;h3 id="ride--class-api">Ride / Class API&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Ride Metadata Mappings&lt;/strong> - Request ride metadata mappings details&lt;/li>
&lt;li>&lt;strong>Archived Rides&lt;/strong> - Request archived rides&lt;/li>
&lt;li>&lt;strong>Live Rides&lt;/strong> - Request live rides&lt;/li>
&lt;li>&lt;strong>Ride by Id&lt;/strong> - Request ride info by id&lt;/li>
&lt;li>&lt;strong>Ride Details&lt;/strong> - Request ride details&lt;/li>
&lt;li>&lt;strong>Ride Filters&lt;/strong> - Request ride filters&lt;/li>
&lt;li>&lt;strong>Ride Recent Following Workouts ðŸ”’&lt;/strong> - Request recent following users&lt;/li>
&lt;li>&lt;strong>Class Categories&lt;/strong> - Request Peloton class categories&lt;/li>
&lt;li>&lt;strong>Favorite Class ðŸ”’&lt;/strong> - Favorite/bookmark a Peloton class&lt;/li>
&lt;li>&lt;strong>Unfavorite Class ðŸ”’&lt;/strong> - Unfavorite/unbookmark a Peloton class&lt;/li>
&lt;li>&lt;strong>Reserve Live Class ðŸ”’&lt;/strong> - Reserve an upcoming live Peloton class&lt;/li>
&lt;li>&lt;strong>Unreserve Live Class ðŸ”’&lt;/strong> - Remove reservation from an upcoming live Peloton class&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://app.getpostman.com/run-collection/7fbe9df35c2e20de26d6"target="_blank" rel="noopener noreferrer">&lt;img src="https://run.pstmn.io/button.svg"
alt="Run in Postman"/>&lt;/a>
&lt;/p>
&lt;h3 id="user-api">User API&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Me ðŸ”’&lt;/strong> - Request the current logged in user details&lt;/li>
&lt;li>&lt;strong>User by Id&lt;/strong> - Request user details by user id&lt;/li>
&lt;li>&lt;strong>User by Username&lt;/strong> - Request user details by Peloton username&lt;/li>
&lt;li>&lt;strong>User Workouts ðŸ”’&lt;/strong> - Request a list of a user&amp;rsquo;s workouts&lt;/li>
&lt;li>&lt;strong>User Workout History ðŸ”’&lt;/strong> - Download your workout history in CSV format&lt;/li>
&lt;li>&lt;strong>User Overview ðŸ”’&lt;/strong> - Request user workout overview details (workout counts, achievements, personal records, steaks)&lt;/li>
&lt;li>&lt;strong>User Subscriptions ðŸ”’&lt;/strong> - Request your Peloton user account subscription details&lt;/li>
&lt;li>&lt;strong>User Subscription Transactions ðŸ”’&lt;/strong> - Request your Peloton user subscription transactions (billing)&lt;/li>
&lt;li>&lt;strong>User Achievements ðŸ”’&lt;/strong> - Request user achievement details&lt;/li>
&lt;li>&lt;strong>User Challenges ðŸ”’&lt;/strong> - Request user challenges details (past, current, upcoming)&lt;/li>
&lt;li>&lt;strong>User Followers ðŸ”’&lt;/strong> - Request user followers details&lt;/li>
&lt;li>&lt;strong>User Following ðŸ”’&lt;/strong> - Request user following details&lt;/li>
&lt;li>&lt;strong>User Search ðŸ”’&lt;/strong> - Search for Peloton users by username&lt;/li>
&lt;li>&lt;strong>User Settings ðŸ”’&lt;/strong> - Request user settings details&lt;/li>
&lt;li>&lt;strong>User Referral History ðŸ”’&lt;/strong> - Request user referral history&lt;/li>
&lt;li>&lt;strong>User Calendar Activity ðŸ”’&lt;/strong> - Request user calendar activity&lt;/li>
&lt;li>&lt;strong>User Relationships ðŸ”’&lt;/strong> - Follow/Unfollow a specific Peloton user by id&lt;/li>
&lt;li>&lt;strong>Update User Profile ðŸ”’&lt;/strong> - Update your Peloton user profile info&lt;/li>
&lt;li>&lt;strong>Update User Settings ðŸ”’&lt;/strong> - Update your Peloton user settings info (Privacy, Notifications, Connected Networks, Display Preferences, Content Preferences)&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://app.getpostman.com/run-collection/9a2a890f2070928e52db"target="_blank" rel="noopener noreferrer">&lt;img src="https://run.pstmn.io/button.svg"
alt="Run in Postman"/>&lt;/a>
&lt;/p>
&lt;h3 id="workout-api">Workout API&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>User Workouts ðŸ”’&lt;/strong> - Request a list of a user&amp;rsquo;s workouts&lt;/li>
&lt;li>&lt;strong>Workout by Id&lt;/strong> - Request workout details by id&lt;/li>
&lt;li>&lt;strong>Workout Performance Graph&lt;/strong> - Request workout performance graph details (summaries, metrics)&lt;/li>
&lt;li>&lt;strong>Delete Workout ðŸ”’&lt;/strong> - Remove/delete Peloton workout from user&amp;rsquo;s workout history&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://app.getpostman.com/run-collection/f27132f0c9e8ddffa725"target="_blank" rel="noopener noreferrer">&lt;img src="https://run.pstmn.io/button.svg"
alt="Run in Postman"/>&lt;/a>
&lt;/p>
&lt;h2 id="graphql-api">GraphQL API&lt;/h2>
&lt;p>Peloton appears to use GraphQL to support their tags functionality. Below are the available queries using the GraphQL API endpoint.&lt;/p>
&lt;p>&lt;a href="https://app.getpostman.com/run-collection/74337aa08297636d2466"target="_blank" rel="noopener noreferrer">&lt;img src="https://run.pstmn.io/button.svg"
alt="Run in Postman"/>&lt;/a>
&lt;/p>
&lt;p>The GraphQL endpoint still requires an authenticated user to login to produce a &lt;code>peloton_session_id&lt;/code> Cookie.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="#graphql-api">GraphQL APIs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#querying-tags">Querying Tags&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#mutations">Mutations&lt;/a>
&lt;/li>
&lt;li>&lt;a href="#graphql-pagination">Pagination&lt;/a>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ðŸ”’ = Privileged Queries / Mutations&lt;/p>
&lt;/blockquote>
&lt;h3 id="querying-tags">Querying Tags&lt;/h3>
&lt;p>Perform read operations and retrieve data on Peloton tags (Ex: #PelotonDads, #PelotonDevs).&lt;/p>
&lt;ul>
&lt;li>&lt;strong>MyTags ðŸ”’&lt;/strong> - Request your tags&lt;/li>
&lt;li>&lt;strong>PrimaryTag ðŸ”’&lt;/strong> - Request your primary tag&lt;/li>
&lt;li>&lt;strong>SearchTag ðŸ”’&lt;/strong> - Search for tags&lt;/li>
&lt;li>&lt;strong>TagBrowseCategory ðŸ”’&lt;/strong> - Request tag info by category&lt;/li>
&lt;li>&lt;strong>TagBrowseCategoryDisplayNames ðŸ”’&lt;/strong> - Request tag category display names&lt;/li>
&lt;li>&lt;strong>TagDetail ðŸ”’&lt;/strong> - Request tag details&lt;/li>
&lt;/ul>
&lt;h3 id="mutations">Mutations&lt;/h3>
&lt;p>Perform mutations to change data on Peloton tags.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>AddTagToUser ðŸ”’&lt;/strong> - Add Peloton tag to your user account&lt;/li>
&lt;li>&lt;strong>RemoveTagFromUser ðŸ”’&lt;/strong> - Remove tag from your user account&lt;/li>
&lt;li>&lt;strong>SetTagAsPrimary ðŸ”’&lt;/strong> - Set tag as your primary tag&lt;/li>
&lt;/ul>
&lt;h3 id="qraphql-pagination">QraphQL Pagination&lt;/h3>
&lt;p>If a resource has a lot of data, more than likely the response will have a &lt;code>pageInfo&lt;/code> object that contains metadata you&amp;rsquo;ll need to continue paginating:&lt;/p>
&lt;ul>
&lt;li>&lt;code>endCursor&lt;/code> - returns a non-null opaque string as a marker to the last items in the collection of results returned from the query.&lt;/li>
&lt;li>&lt;code>hasNextPage&lt;/code> boolean field to help identify if there are more pages/results to query from the collection.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#e6db74">&amp;#34;pageInfo&amp;#34;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> {
&lt;span style="color:#f92672">&amp;#34;endCursor&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;MTk==&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;hasNextPage&amp;#34;&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
}
&lt;/code>&lt;/pre>&lt;/div>&lt;p>On the subsequent request you can pass a graphql &lt;code>after&lt;/code> variable/cursor argument to tell the API, â€œhereâ€™s where I left off last time, get me the next X number of items.&amp;quot;&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">{
&lt;span style="color:#f92672">&amp;#34;after&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;MTk==&amp;#34;&lt;/span>
}
&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>